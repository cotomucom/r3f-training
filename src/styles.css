:root {
  color-scheme: light;
  font-family: "Noto Sans JP", "Hiragino Kaku Gothic ProN", "Yu Gothic", sans-serif;
  line-height: 1.6;
  background: #f7f6f3;
  color: #1f1f1f;
}

* {
  box-sizing: border-box;
}

body {
  margin: 0;
  min-height: 100vh;
}

.app {
  display: grid;
  grid-template-rows: auto 1fr;
  min-height: 100vh;
}

.app__header {
  padding: 20px 24px 12px;
  background: linear-gradient(120deg, #fffaf0, #f0f7ff);
  border-bottom: 1px solid #e6e1d9;
}

.app__header h1 {
  margin: 0 0 4px;
  font-size: 24px;
}

.app__subtitle {
  margin: 0 0 12px;
  color: #4b4b4b;
}

.app__nav {
  display: flex;
  gap: 12px;
  flex-wrap: wrap;
}

.app__nav a {
  text-decoration: none;
  padding: 6px 12px;
  border-radius: 999px;
  background: #ffffff;
  color: #1f1f1f;
  border: 1px solid #d7d2c7;
}

.app__nav a.active {
  background: #1f1f1f;
  color: #ffffff;
  border-color: #1f1f1f;
}

.app__main {
  padding: 16px 24px 32px;
}

.page {
  display: grid;
  grid-template-columns: minmax(260px, 340px) minmax(0, 1fr);
  gap: 20px;
  align-items: start;
}

.home {
  max-width: 1040px;
}

.home__split {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 20px;
}

.home__block {
  min-width: 0;
}

.page__panel {
  background: #ffffff;
  border: 1px solid #e4ded4;
  border-radius: 12px;
  padding: 16px;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.06);
}

.page__panel h2 {
  margin-top: 0;
}

.page__panel ul {
  padding-left: 18px;
  margin: 8px 0 0;
}

.canvas-wrap {
  height: 72vh;
  min-height: 420px;
  border-radius: 16px;
  overflow: hidden;
  border: 1px solid #e4ded4;
  background: #0f0f12;
}

.controls {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin-top: 12px;
}

.controls button {
  border-radius: 8px;
  border: 1px solid #d7d2c7;
  background: #f4f2ee;
  padding: 8px 12px;
  cursor: pointer;
}

.controls a {
  display: inline-block;
  border-radius: 8px;
  border: 1px solid #d7d2c7;
  background: #f4f2ee;
  padding: 8px 12px;
  cursor: pointer;
  color: #1f1f1f;
  text-decoration: none;
}

.controls a.primary {
  background: #1f1f1f;
  color: #ffffff;
  border-color: #1f1f1f;
}

.controls button.primary {
  background: #1f1f1f;
  color: #ffffff;
  border-color: #1f1f1f;
}

.notice {
  font-size: 12px;
  color: #6a675f;
}

/* ========================================
   チャプターリスト（トップページ）
   ======================================== */

.chapter-list {
  padding-left: 0;
  list-style: none;
  margin: 16px 0 0;
}

.chapter-list li {
  margin: 0;
}

.chapter-list__link {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 12px;
  border-radius: 8px;
  text-decoration: none;
  color: #1f1f1f;
  transition: background 0.15s;
}

.chapter-list__link:hover {
  background: #f0ede7;
}

.chapter-list__num {
  flex-shrink: 0;
  font-size: 12px;
  font-weight: 700;
  color: #6a675f;
  width: 42px;
}

.chapter-list__title {
  font-size: 14px;
  line-height: 1.5;
}

/* ========================================
   コースページ レイアウト
   ======================================== */

.course {
  display: flex;
  flex-direction: column;
  height: calc(100vh - 130px);
  min-height: 500px;
}

.course__toolbar {
  display: flex;
  align-items: center;
  gap: 12px;
  padding-bottom: 12px;
  border-bottom: 1px solid #e4ded4;
  margin-bottom: 12px;
  flex-wrap: wrap;
}

.chapter-selector {
  font-family: inherit;
  font-size: 13px;
  padding: 6px 10px;
  border-radius: 8px;
  border: 1px solid #d7d2c7;
  background: #ffffff;
  color: #1f1f1f;
  cursor: pointer;
  min-width: 260px;
}

.course__chapter-title {
  font-size: 15px;
  font-weight: 700;
  color: #3a3a3a;
  flex: 1;
}

.course__swap-btn {
  font-family: inherit;
  font-size: 13px;
  padding: 6px 14px;
  border-radius: 8px;
  border: 1px solid #d7d2c7;
  background: #f4f2ee;
  cursor: pointer;
  white-space: nowrap;
  transition: background 0.15s;
}

.course__swap-btn:hover {
  background: #e8e5df;
}

.course__body {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 0;
  flex: 1;
  min-height: 0;
}

.course__divider {
  position: relative;
  cursor: col-resize;
  touch-action: none;
}

.course__divider::before {
  content: "";
  position: absolute;
  left: 50%;
  top: 0;
  transform: translateX(-50%);
  width: 2px;
  height: 100%;
  border-radius: 999px;
  background: #d7d2c7;
  transition: background 0.12s;
}

.course__divider:hover::before,
.course__divider.is-resizing::before {
  background: #8a8780;
}

.course__material {
  background: #ffffff;
  border: 1px solid #e4ded4;
  border-radius: 12px;
  padding: 28px 32px;
  overflow-y: auto;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.06);
}

.course__implement {
  display: flex;
  flex-direction: column;
}

.course__implement .canvas-wrap {
  flex: 1;
  min-height: 0;
  height: auto;
}

.course__implement-placeholder {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100%;
  color: #6a675f;
  text-align: center;
  gap: 8px;
}

.course__implement-placeholder p {
  margin: 0;
}

.course__loading {
  display: flex;
  align-items: center;
  justify-content: center;
  height: 200px;
  color: #6a675f;
  font-size: 14px;
}

/* ========================================
   チャプター前後移動
   ======================================== */

.chapter-pager {
  display: flex;
  justify-content: space-between;
  gap: 12px;
  padding: 16px 0;
  border-top: 1px solid #ebe8e2;
}

.chapter-pager:first-child {
  border-top: none;
  padding-top: 0;
  padding-bottom: 20px;
  border-bottom: 1px solid #ebe8e2;
}

.chapter-pager__btn {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 16px;
  border-radius: 10px;
  border: 1px solid #d7d2c7;
  background: #faf9f7;
  cursor: pointer;
  text-align: left;
  transition: background 0.15s, border-color 0.15s;
  max-width: 48%;
  font-family: inherit;
}

.chapter-pager__btn:hover {
  background: #f0ede7;
  border-color: #c4bfb5;
}

.chapter-pager__btn--next {
  margin-left: auto;
  text-align: right;
}

.chapter-pager__arrow {
  font-size: 18px;
  color: #8a8780;
  flex-shrink: 0;
}

.chapter-pager__label {
  display: flex;
  flex-direction: column;
  gap: 2px;
  min-width: 0;
}

.chapter-pager__dir {
  font-size: 11px;
  color: #8a8780;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.chapter-pager__title {
  font-size: 13px;
  font-weight: 600;
  color: #3a3a3a;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* ========================================
   マークダウン教材スタイル
   読みやすさを最優先するタイポグラフィ
   ======================================== */

.markdown {
  font-size: 15px;
  line-height: 1.9;
  color: #2a2a2a;
  word-break: break-word;
}

/* --- 見出し --- */

.markdown h1 {
  font-size: 26px;
  font-weight: 800;
  margin: 0 0 24px;
  padding-bottom: 12px;
  border-bottom: 3px solid #e4ded4;
  line-height: 1.4;
  color: #1a1a1a;
}

.markdown h2 {
  font-size: 20px;
  font-weight: 700;
  margin: 40px 0 16px;
  padding-bottom: 8px;
  border-bottom: 1px solid #e4ded4;
  line-height: 1.4;
  color: #1f1f1f;
}

.markdown h3 {
  font-size: 17px;
  font-weight: 700;
  margin: 32px 0 12px;
  line-height: 1.4;
  color: #2a2a2a;
}

.markdown h4 {
  font-size: 15px;
  font-weight: 700;
  margin: 24px 0 8px;
  color: #3a3a3a;
}

/* 見出しの直後のマージン調整 */
.markdown h2 + p,
.markdown h3 + p {
  margin-top: 0;
}

/* --- 段落・テキスト --- */

.markdown p {
  margin: 14px 0;
}

.markdown strong {
  font-weight: 700;
  color: #1a1a1a;
}

.markdown em {
  font-style: italic;
}

/* --- リスト --- */

.markdown ul,
.markdown ol {
  margin: 12px 0;
  padding-left: 24px;
}

.markdown li {
  margin: 6px 0;
  line-height: 1.8;
}

.markdown li > p {
  margin: 4px 0;
}

/* --- リンク --- */

.markdown a {
  color: #2563eb;
  text-decoration: none;
  border-bottom: 1px solid transparent;
  transition: border-color 0.15s;
}

.markdown a:hover {
  border-bottom-color: #2563eb;
}

/* --- インラインコード --- */

.markdown__inline-code {
  font-family: "JetBrains Mono", "Fira Code", "SF Mono", Consolas, monospace;
  font-size: 0.88em;
  padding: 2px 7px;
  border-radius: 5px;
  background: #f3f0eb;
  color: #c7254e;
  border: 1px solid #e8e4dd;
  white-space: nowrap;
}

/* --- コードブロック --- */

.markdown__code-block {
  position: relative;
  margin: 20px 0;
}

.markdown__code-lang {
  position: absolute;
  top: 0;
  right: 0;
  font-size: 11px;
  font-weight: 600;
  padding: 4px 10px;
  border-radius: 0 10px 0 8px;
  background: rgba(0, 0, 0, 0.06);
  color: #6a675f;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  pointer-events: none;
}

.markdown__code-block pre {
  margin: 0;
  padding: 20px 24px;
  border-radius: 10px;
  background: #1e1e2e;
  color: #cdd6f4;
  overflow-x: auto;
  font-family: "JetBrains Mono", "Fira Code", "SF Mono", Consolas, monospace;
  font-size: 13.5px;
  line-height: 1.65;
  border: 1px solid #313244;
  tab-size: 2;
}

.markdown__code-block code {
  font-family: inherit;
  font-size: inherit;
  background: transparent;
  padding: 0;
  border: none;
  color: inherit;
}

/* シンタックスハイライト（Catppuccin風のダーク配色） */
.markdown__code-block .keyword { color: #cba6f7; }
.markdown__code-block .function { color: #89b4fa; }
.markdown__code-block .string { color: #a6e3a1; }
.markdown__code-block .number { color: #fab387; }
.markdown__code-block .comment { color: #6c7086; font-style: italic; }
.markdown__code-block .tag { color: #89b4fa; }
.markdown__code-block .attr-name { color: #f9e2af; }
.markdown__code-block .attr-value { color: #a6e3a1; }
.markdown__code-block .punctuation { color: #9399b2; }
.markdown__code-block .operator { color: #89dceb; }
.markdown__code-block .builtin { color: #f5c2e7; }
.markdown__code-block .class-name { color: #f9e2af; }

/* --- テーブル --- */

.markdown__table-wrap {
  overflow-x: auto;
  margin: 16px 0;
}

.markdown table {
  border-collapse: collapse;
  width: 100%;
  font-size: 14px;
}

.markdown th {
  background: #f7f5f0;
  font-weight: 700;
  text-align: left;
  padding: 10px 14px;
  border: 1px solid #e4ded4;
  white-space: nowrap;
}

.markdown td {
  padding: 10px 14px;
  border: 1px solid #e4ded4;
  vertical-align: top;
}

.markdown tr:nth-child(even) td {
  background: #faf9f7;
}

/* --- 引用 --- */

.markdown blockquote {
  margin: 16px 0;
  padding: 12px 20px;
  border-left: 4px solid #d7d2c7;
  background: #faf9f7;
  color: #4b4b4b;
  border-radius: 0 8px 8px 0;
}

.markdown blockquote p {
  margin: 6px 0;
}

/* --- 水平線 --- */

.markdown hr {
  border: none;
  border-top: 1px solid #e4ded4;
  margin: 32px 0;
}

/* --- 画像 --- */

.markdown img {
  max-width: 100%;
  border-radius: 8px;
}

/* ========================================
   ASCII アート / 図表（等幅テキスト）
   ======================================== */

.markdown pre:not(.markdown__code-block pre) {
  margin: 16px 0;
  padding: 16px 20px;
  border-radius: 10px;
  background: #faf9f7;
  border: 1px solid #e4ded4;
  overflow-x: auto;
  font-family: "JetBrains Mono", "Fira Code", "SF Mono", Consolas, monospace;
  font-size: 13.5px;
  line-height: 1.6;
}

/* ========================================
   レスポンシブ
   ======================================== */

@media (max-width: 980px) {
  .page {
    grid-template-columns: 1fr;
  }

  .home__split {
    grid-template-columns: 1fr;
  }

  .canvas-wrap {
    height: 60vh;
  }

  .course__body {
    grid-template-columns: 1fr;
  }

  .course__material {
    padding: 20px 16px;
  }
}
