# React Three Fiber 実践コース

このコースでは、React Three Fiber（R3F）と `@react-three/drei` を使って「3Dオブジェクトを配置し、選択・移動・回転・削除できるインタラクティブなシーン」を一から組み上げていきます。

完成したアプリケーションでは、色違いの立方体がグリッド上に並び、クリックで選択、ドラッグで移動、ボタンで回転や削除ができるようになります。さらに外部の3Dモデル（GLTF形式）を読み込んで、同じ操作体系に組み込むところまで扱います。


## このコースの進め方

教材はすべてこのリポジトリの中に収まっています。ブラウザで外部サイトを開く必要はありません。

エディタで各チャプターの Markdown を読みながら、`src/pages/Playground.tsx` に自分の手でコードを書いていってください。章ごとに少しずつ機能を足していく構成になっているので、前の章のコードが次の章の土台になります。書いたコードは `npm run dev` で即座にブラウザの「実装エリア」で確認できます。

既に完成済みの実装が `src/pages/R3FDrei.tsx` に入っていますので、詰まったときはそちらを参考にしてください。ただし、最初からコードを読むだけで済ませてしまうと身につきません。まずは自分で書いてみて、動かなかったら見比べる、という順番をおすすめします。

> drei を使わずに R3F のコア機能だけで同じ機能を実装した `src/pages/R3FCore.tsx` も参考実装として残してあります。drei が内部で何をしているのかを理解したいときに見比べてみてください。


## 前提知識

- TypeScript の基本的な型注釈（`string`, `number`, 配列、オブジェクト型）が読める
- React の `useState` を使ったことがある
- ターミナルで `npm install` と `npm run dev` が実行できる

three.js や 3D グラフィックスの知識は不要です。必要な概念はコースの中で解説します。


## 使用ライブラリ

| パッケージ | バージョン | 役割 |
|---|---|---|
| `three` | 0.182.x | 3D描画エンジン本体 |
| `@react-three/fiber` | 9.x | three.js を React コンポーネントとして扱うレンダラー |
| `@react-three/drei` | 10.x | R3F の便利コンポーネント集（OrbitControls、TransformControls、useGLTF など） |
| `react` | 19.x | UI フレームワーク |
| `typescript` | 5.9.x | 型安全なコーディング |
| `vite` | 7.x | 開発サーバーとビルドツール |

前半（Chapter 0〜3）は R3F のコア機能だけで実装し、Chapter 4 から drei を導入します。drei の有無で変わらない部分（state 管理、選択、回転、削除）を先に学ぶことで、drei が「何を省略してくれているのか」がわかるようになります。


## チャプター構成

### Chapter 0 — three.js と R3F の役割を理解する
コードは書きません。three.js が担当する「描画」と、React が担当する「状態管理」の境界線を把握します。この理解がないまま先に進むと、どこに何を書けばいいのか迷子になります。

### Chapter 1 — 最小のシーンを表示する
`Canvas` コンポーネントとライティングの基本を学び、state に持ったオブジェクト配列から立方体を描画します。ここで初めてブラウザに 3D が映ります。

### Chapter 2 — クリックで選択する
立方体をクリックして「どれが操作対象か」を決める仕組みを作ります。イベント伝播の制御と、選択状態の視覚フィードバックを実装します。

### Chapter 3 — 回転と削除
選択中のオブジェクトをボタンで回転・削除する機能を追加します。`map` と `filter` によるイミュータブルな state 更新パターンを身につけます。

### Chapter 4 — drei を導入する（カメラとドラッグ）
`@react-three/drei` の `OrbitControls` でカメラ操作を、`TransformControls` でオブジェクトのドラッグ移動・回転を追加します。drei と three.js のオブジェクト参照の橋渡しや、操作結果を state に同期するパターンを学びます。

### Chapter 5 — 3Dモデルを読み込む
drei の `useGLTF` を使って外部の 3D モデルファイルを表示し、既存の選択・操作システムに統合します。「読み込み」と「操作対象化」は別の問題であることを理解します。

### Chapter 6 — three.js 単体と比較する
ここまで R3F + drei で実装してきた機能を、three.js 単体で書いた場合と比較します。同じ結果を得るために、それぞれのアプローチでどんな責務を負う必要があるのかを整理します。


## セットアップ

```bash
npm install
npm run dev
```

ブラウザで `http://localhost:5173` が開きます。
